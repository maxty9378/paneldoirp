# Настройка файрвола в Яндекс.Облако

## Через веб-консоль (рекомендуется)

1. Зайдите в [консоль Яндекс.Облако](https://console.cloud.yandex.ru/)
2. Перейдите в **VPC** → **Группы безопасности**
3. Найдите группу: `default-sg-enphq6fifa9dqk9eo7gd`
4. Нажмите на группу для редактирования
5. Добавьте следующие правила для **входящего трафика**:

### Правило 1: API (порт 8000)
- **Направление**: Входящий
- **Протокол**: TCP
- **Порты**: 8000
- **Источник**: CIDR
- **CIDR блоки**: 0.0.0.0/0 (или только нужные IP)
- **Описание**: Supabase API

### Правило 2: Studio (порт 54323)
- **Направление**: Входящий
- **Протокол**: TCP
- **Порты**: 54323
- **Источник**: CIDR
- **CIDR блоки**: Ваш IP адрес (для безопасности) или 0.0.0.0/0
- **Описание**: Supabase Studio

### Правило 3: HTTPS (порт 443)
- **Направление**: Входящий
- **Протокол**: TCP
- **Порты**: 443
- **Источник**: CIDR
- **CIDR блоки**: 0.0.0.0/0
- **Описание**: HTTPS (для будущего SSL)

### Правило 4: PostgreSQL (порт 5432) - опционально, только для админов
- **Направление**: Входящий
- **Протокол**: TCP
- **Порты**: 5432
- **Источник**: CIDR
- **CIDR блоки**: Только ваш IP адрес
- **Описание**: PostgreSQL (только для админов)

## Через YC CLI (если установлен)

```bash
yc vpc security-group add-rule enphq6fifa9dqk9eo7gd \
  --direction ingress \
  --protocol tcp \
  --port 8000 \
  --cidr 0.0.0.0/0 \
  --description "Supabase API"

yc vpc security-group add-rule enphq6fifa9dqk9eo7gd \
  --direction ingress \
  --protocol tcp \
  --port 54323 \
  --cidr 0.0.0.0/0 \
  --description "Supabase Studio"

yc vpc security-group add-rule enphq6fifa9dqk9eo7gd \
  --direction ingress \
  --protocol tcp \
  --port 443 \
  --cidr 0.0.0.0/0 \
  --description "HTTPS"
```

## Проверка

После настройки проверьте доступность:
```bash
curl http://51.250.94.103:8000/rest/v1/
```

Если получаете ответ (даже ошибку авторизации) - файрвол настроен правильно.

