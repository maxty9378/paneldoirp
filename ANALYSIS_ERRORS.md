# Анализ ошибок при развертывании Supabase

## Основные проблемы:

1. **Дубликаты секций в config.toml**
   - Проблема: При добавлении настроек через sed создавались дубликаты секций [api], [db], [auth]
   - Причина: Неправильное использование sed для вставки в середину файла
   - Решение: Пересоздать проект с нуля через `supabase init`

2. **Неправильный синтаксис массива schemas**
   - Проблема: `schemas = [" public, storage, graphql_public]` - неправильный синтаксис
   - Должно быть: `schemas = ["public", "storage", "graphql_public"]`
   - Причина: Экранирование кавычек в sed командах через SSH

3. **Конфликт портов**
   - На ВМ уже запущен контейнер на порту 3000 (doirp-bff_bff_1)
   - Supabase пытается использовать порт 8000 для API

## Решение:

Используем скрипт `setup-supabase-clean.sh` который:
1. Удаляет старый проект
2. Создает новый через `supabase init`
3. Правильно настраивает порт в config.toml
4. Генерирует ключи
5. Запускает Supabase

Это должно решить все проблемы с config.toml.

