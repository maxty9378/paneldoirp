#!/bin/bash

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ–º–µ–Ω–∞ doirp.ru"
echo "===================================="
echo ""

echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ —á–∞—Å–∞ –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è):"
nslookup doirp.ru 8.8.8.8 || echo "DNS –µ—â–µ –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª—Å—è"
echo ""

echo "2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ IP:"
curl -s -o /dev/null -w "HTTP –∫–æ–¥: %{http_code}\n" http://51.250.94.103/health --max-time 5 || echo "–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"
echo ""

echo "3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ –¥–æ–º–µ–Ω—É:"
curl -s -o /dev/null -w "HTTP –∫–æ–¥: %{http_code}\n" http://doirp.ru/health --max-time 5 || echo "–î–æ–º–µ–Ω –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
echo ""

echo "4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:"
ssh -i src/ssh/ssh-key-doirp-01 -o StrictHostKeyChecking=no doirp@51.250.94.103 "sudo systemctl status nginx --no-pager | head -10"
echo ""

echo "‚úÖ –ï—Å–ª–∏ DNS –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–¥–æ–∂–¥–∏—Ç–µ 10-60 –º–∏–Ω—É—Ç"
echo "‚úÖ –ï—Å–ª–∏ HTTP –∫–æ–¥ 200 - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!"
echo "‚úÖ –ï—Å–ª–∏ 502 - Supabase –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8000"

